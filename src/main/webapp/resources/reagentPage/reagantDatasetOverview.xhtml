<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:layout="http://java.sun.com/jsf/composite/layout">

	<composite:interface>
		<composite:attribute name="annotation"
			type="edu.bcm.dldcc.big.nursa.model.reagentAnnotations.DatasetReagentAnnotation"
			displayName="a Reagent Dataset object" required="true" />
	</composite:interface>
	<composite:implementation>
		<h:form>
			<p:panel header="Datasets" collapsed="true" toggleable="true">
				<p:ajax event="toggle"
					listener="#{ajaxPanelController.alternateComponentState(cc.attrs.annotation.id.toString())}"
					update="reagentDatasetContent" onstart="$.blockUI()"
					oncomplete="$.unblockUI()" />
				<p:outputPanel id="reagentDatasetContent">
					<p:outputPanel
						rendered="#{ajaxPanelController.renderComponent(cc.attrs.annotation.id.toString())}">
						
						<p:dataTable id="reagentDatasetTable" var="pp"
							value="#{reagentService.lazyLoaders.get(cc.attrs.annotation.id.toString())}"
							emptyMessage="No data are available for this reagent."
							paginator="true" paginatorPosition="bottom"
							paginatorTemplate="Show {RowsPerPageDropdown} per page {CurrentPageReport} {FirstPageLink} {PreviousPageLink} 
				{PageLinks} {NextPageLink} {LastPageLink}"
							currentPageReportTemplate="Showing {startRecord} - {endRecord} of {totalRecords}"
							rowsPerPageTemplate="10,20,50" styleClass="listTable" rows="10"
							lazy="true">
							<!-- adding empty header to get round top 
				solely for L&F. May go away -->
							<f:facet name="header">&#160;</f:facet>
							<!-- Type -->
							<p:column width="100">
								<f:facet name="header">
									<h:outputText value="Type" />
								</f:facet>
								tbd
							</p:column>
							<!-- Dataset-->
							<p:column width="100">
								<f:facet name="header">
									<h:outputText value="Dataset" />
								</f:facet>
								tbd
							</p:column>
							<!--Citation -->
							<p:column width="100">
								<f:facet name="header">
									<h:outputText value="Citation" />
								</f:facet>
								tbd
							</p:column>
							<!-- DOI -->
							<p:column width="100">
								<f:facet name="header">
									<h:outputText value="DOI" />
								</f:facet>
								tbd
							</p:column>
						</p:dataTable>
						
					</p:outputPanel>
				</p:outputPanel>
			</p:panel>
		</h:form>
	</composite:implementation>

</ui:composition>